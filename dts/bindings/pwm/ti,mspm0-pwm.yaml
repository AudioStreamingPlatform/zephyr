# Copyright (C) 2024 Bang & Olufsen A/S, Denmark
#
# SPDX-License-Identifier: Apache-2.0

description: |
  Driver to enable MSPM0 PWM hardware for TIMx timers (TIMA/TIMG).
  This driver is implementing the existing Zephyr PWM API (pwm_driver_api) and
  supports the set_cycles and get_cycles_per_sec functions.
  Note, supported capture channel direction for now is up to Capture Channel 2 or 4
  (depending on the timer used) and output only.

compatible: "ti,mspm0-pwm"

include: [base.yaml, pinctrl-device.yaml, pwm-controller.yaml]

properties:
  ti,prescaler:
    required: true
    type: int
    default: 0
    description: Specifies the value used to divide the input clock frequency, allowing adjustment of the effective clock rate used by the timer.

  ti,mode:
    required: true
    type: int
    description: Determines the operating mode of the timer.
    enum:
      - 0
      - 16
      - 32
    description: |
      The supported PWM modes are the following:
        - 0: "Configure the pwm timer as Edge Align"
        - 16: "Configure the pwm timer as Center Align"
        - 32: "Configure the pwm timer as Edge Align Up"

  ti,clock-frequency:
    const: 32000000
    type: int
    required: true
    description: Defines the clock frequency that the module will use. This value is required and should be treated as read-only; it must not be modified after initial configuration.

  ti,divide-ratio:
    type: int
    required: true
    description: Sets the division ratio for the clock, which controls how the clock frequency is divided before use.

  "#pwm-cells":
    const: 3

pwm-cells:
  - channel
  - period
  - flags
